@model VoteHomWebApp.Models.ElectionInfo
@{
    ViewData["Title"] = "Bem-vindo ao Sistema de Votação";
}

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow-sm">
            <div class="card-body text-center py-5">
                <div class="funcorsan-logo mb-4" style="font-size: 2rem;">
                    <div style="color: #0066cc;">◆◆</div>
                    <div style="font-size: 1.5rem; margin-top: 10px;">FUNCORSAN</div>
                    <div style="font-size: 0.9rem; color: #666; font-weight: normal;">Seu futuro mais presente</div>
                </div>

                <h2 class="mb-4">Bem-vindo ao Sistema de Votação</h2>
                
                @if (!string.IsNullOrEmpty(TempData["ErrorMessage"] as string))
                {
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        @TempData["ErrorMessage"]
                    </div>
                }
                
                @if (!string.IsNullOrEmpty(ViewBag.ErrorMessage as string))
                {
                    <div class="alert alert-danger">
                        <i class="fas fa-times-circle"></i>
                        @ViewBag.ErrorMessage
                    </div>
                }
                
                @if (!string.IsNullOrEmpty(ViewBag.StatusMessage as string))
                {
                    <div class="alert alert-info">
                        <i class="fas fa-info-circle"></i>
                        @ViewBag.StatusMessage
                    </div>
                }
                
                @{
                    var now = DateTime.Now;
                    var beforeStart = now < Model.StartDate;
                    var afterEnd = now > Model.EndDate;
                    var isActive = !beforeStart && !afterEnd;
                }
                
                @if (beforeStart)
                {
                    <div class="alert alert-warning">
                        <i class="fas fa-clock"></i>
                        <h4>@Model.Name</h4>
                        <p class="mb-2"><strong>A eleição ainda não iniciou</strong></p>
                        <p class="mb-0">Período de votação:</p>
                        <p class="fw-bold">
                            <i class="fas fa-calendar-alt"></i> @Model.StartDate.ToString("dd/MM/yyyy") às @Model.StartDate.ToString("HH:mm") até @Model.EndDate.ToString("dd/MM/yyyy") às @Model.EndDate.ToString("HH:mm")
                        </p>
                        <small class="text-muted">Aguarde o horário de abertura para votar.</small>
                    </div>
                }
                else if (afterEnd)
                {
                    <div class="alert alert-danger">
                        <i class="fas fa-times-circle"></i>
                        <h4>@Model.Name</h4>
                        <p class="mb-2"><strong>A eleição já foi encerrada</strong></p>
                        <p class="mb-0">Período de votação foi:</p>
                        <p class="fw-bold">
                            <i class="fas fa-calendar-times"></i> @Model.StartDate.ToString("dd/MM/yyyy") às @Model.StartDate.ToString("HH:mm") até @Model.EndDate.ToString("dd/MM/yyyy") às @Model.EndDate.ToString("HH:mm")
                        </p>
                        <small class="text-muted">O prazo para votar expirou.</small>
                    </div>
                }
                else
                {
                    <div class="alert alert-success">
                        <i class="fas fa-vote-yea"></i>
                        <h4>@Model.Name</h4>
                        <p class="mb-2"><strong>Eleição ativa - Votação liberada!</strong></p>
                        <p class="mb-0">Período de votação:</p>
                        <p class="fw-bold">
                            <i class="fas fa-calendar-check"></i> @Model.StartDate.ToString("dd/MM/yyyy") às @Model.StartDate.ToString("HH:mm") até @Model.EndDate.ToString("dd/MM/yyyy") às @Model.EndDate.ToString("HH:mm")
                        </p>
                        <small class="text-success">Clique em "Entrar para Votar" para acessar.</small>
                    </div>
                }

                <div class="mt-4">
                    @if (beforeStart)
                    {
                        <p class="text-muted">
                            A votação ainda não foi liberada. A página será atualizada automaticamente.
                        </p>
                    }
                    else if (afterEnd)
                    {
                        <p class="text-muted">
                            O período de votação já se encerrou. Não é mais possível votar nesta eleição.
                        </p>
                    }
                    else
                    {
                        <p class="text-success fw-bold">
                            <i class="fas fa-check-circle"></i> Eleição disponível para votação!
                        </p>
                    }
                </div>

                <div class="mt-4">
                    @if (isActive)
                    {
                        <a href="@Url.Action("Login", "Vote")" class="btn btn-success btn-lg me-2">
                            <i class="fas fa-sign-in-alt"></i> Entrar para Votar
                        </a>
                    }
                    <button class="btn btn-outline-primary" onclick="location.reload()">
                        <i class="fas fa-sync-alt"></i> Atualizar Página
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        // Auto-refresh da página a cada 30 segundos
        setTimeout(function() {
            location.reload();
        }, 30000);
    </script>
}